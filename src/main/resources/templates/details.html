<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{commons :: head}"></head>
<body>

<!-- Navbar -->
<div th:replace="~{commons :: navbar}"></div>

<div class="container" th:object="${recipe}">
    <div class="recipe-details">
        <!-- Recipe Image -->
        <div class="recipe-image">
            <img th:src="${recipe.imageUrl}" alt="Recipe Image">
        </div>

        <!-- Recipe Info -->
        <div class="recipe-info">
            <h2 th:text="${recipe.title}">Recipe Title</h2>

            <div class="recipe-meta">
                <span class="date-added">
                    <strong>Date Added:</strong> <span th:text="*{created}"></span>
                </span>
            </div>
            <div>
        <span class="category"><strong>Category:</strong> <span th:text="${recipe.category}"></span>
                </span>
            </div>
            <div>
                <h3>Description</h3>
                <p th:text="${recipe.description}" class="recipe-desc">
                    This is where the recipe description goes. It should give a brief overview of the recipe.
                </p>
            </div>
        </div>

        <!-- Recipe Instructions -->
        <div class="recipe-instructions">
            <h3>Instructions</h3>
            <p th:text="${recipe.instructions}">
                Step-by-step instructions on how to make this recipe will go here.
            </p>
        </div>
    </div>
    <th:block th:if="${userDetailsDTO != null and recipe.createdByUsername == userDetailsDTO.username}">

        <div class="d-flex gap-2 mt-3"
             th:if="${recipe.createdByUsername == userDetailsDTO.username}">

            <!-- Update Button -->
            <a th:href="@{/recipe/update/{id}(id=${recipe.id})}"
               class="btn btn-outline-primary btn-sm d-flex align-items-center gap-1">
                <i class="bi bi-pencil-square"></i> Update
            </a>

            <!-- Delete Button -->
            <form th:action="@{/recipe/details/{id}(id=${recipe.id})}" th:method="DELETE"
                  onsubmit="return confirm('Are you sure you want to delete this recipe?');">
                <button type="submit"
                        class="btn btn-outline-danger btn-sm d-flex align-items-center gap-1">
                    <i class="bi bi-trash3"></i> Delete
                </button>
            </form>
        </div>
    </th:block>

</div>

<div th:replace="~{commons :: footer}"></div>
<div th:replace="~{commons :: scripts}"></div>
</body>

</html>
